# TDD CafeKiosk API Server

API First λ° TDD (Test-Driven Development) λ°©μ‹μΌλ΅ κ°λ°ν•λ” μΉ΄ν ν‚¤μ¤μ¤ν¬ API μ„λ²„μ…λ‹λ‹¤.

## π€ κΈ°μ  μ¤νƒ

- **μ–Έμ–΄ λ° ν”„λ μ„μ›ν¬**: Java 17, Spring Boot 3
- **API λ…μ„Έ**: OpenAPI 3.0, `openapi-generator`
- **λ°μ΄ν„°λ² μ΄μ¤**:
    - **ORM**: JPA, jOOQ
    - **μ¤ν‚¤λ§ κ΄€λ¦¬**: Liquibase
    - **λ°μ΄ν„°λ² μ΄μ¤**: H2 (ν…μ¤νΈ λ° λ΅μ»¬ ν™κ²½)
- **ν…μ¤νΈ**: JUnit 5, Mockito, Spring Modulith
- **κΈ°νƒ€**: Lombok

## π“‚ ν”„λ΅μ νΈ κµ¬μ΅°

λ³Έ ν”„λ΅μ νΈλ” `openapi-generator`λ¥Ό ν†µν•΄ μƒμ„±λ API μ½”λ“μ™€ μ‹¤μ  λΉ„μ¦λ‹μ¤ λ΅μ§μ„ λ¶„λ¦¬ν•λ” Delegate ν¨ν„΄μ„ μ‚¬μ©ν•©λ‹λ‹¤.

```
.
β”β”€β”€ openapi/
β”‚   β””β”€β”€ cafe-kiosk-api-v1.yaml      # API λ…μ„Έμ„
β”β”€β”€ build/generated/openapi         # openapi-generatorκ°€ μƒμ„±ν• μ½”λ“
β”‚   β””β”€β”€ src/main/java
β”‚       β””β”€β”€ com/sc7258/cafekiosk
β”‚           β”β”€β”€ api                 # μƒμ„±λ API μΈν„°νμ΄μ¤ (e.g., MenuApi)
β”‚           β””β”€β”€ api/models          # μƒμ„±λ DTO λ¨λΈ
β””β”€β”€ src/main/java
    β””β”€β”€ com/sc7258/tddcafekiosk
        β”β”€β”€ api                     # API κµ¬ν„μ²΄ (e.g., MenuApiDelegateImpl)
        β”β”€β”€ config                  # μ• ν”λ¦¬μΌ€μ΄μ… μ£Όμ” μ„¤μ •
        β”β”€β”€ domain                  # λ„λ©”μΈ κ³„μΈµ (Entity, Service, Repository)
```

- **`openapi/`**: ν”„λ΅μ νΈμ λ¨λ“  API λ…μ„Έ(YAML)λ¥Ό κ΄€λ¦¬ν•©λ‹λ‹¤.
- **`build/generated/openapi`**: `openapi-generator`μ— μν•΄ μλ™μΌλ΅ μƒμ„±λλ” μ½”λ“(API μΈν„°νμ΄μ¤, DTO)κ°€ μ„μΉν•©λ‹λ‹¤. **μ΄ λ””λ ‰ν† λ¦¬μ μ½”λ“λ” μ§μ ‘ μμ •ν•μ§€ μ•μµλ‹λ‹¤.**
- **`src/main/java/**/api`**: μƒμ„±λ API μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” `Delegate` ν΄λμ¤κ°€ μ„μΉν•©λ‹λ‹¤. μ‹¤μ  API λ΅μ§μ΄ μ‹μ‘λλ” κ³³μ…λ‹λ‹¤.
- **`src/main/java/**/config`**: μ• ν”λ¦¬μΌ€μ΄μ…μ μ£Όμ” μ„¤μ •μ„ λ‹΄λ‹Ήν•λ” ν΄λμ¤κ°€ μ„μΉν•©λ‹λ‹¤.
- **`src/main/java/**/domain`**: λΉ„μ¦λ‹μ¤ λ΅μ§μ ν•µμ‹¬μ„ λ‹΄λ‹Ήν•λ” μ„λΉ„μ¤, λ„λ©”μΈ μ—”ν‹°ν‹°, λ¦¬ν¬μ§€ν„°λ¦¬ μΈν„°νμ΄μ¤κ°€ ν¬ν•¨λ©λ‹λ‹¤.

## π› οΈ μ‘μ—… νλ¦„

λ³Έ ν”„λ΅μ νΈλ” **API First** μ ‘κ·Ό λ°©μ‹κ³Ό **TDD**λ¥Ό κ²°ν•©ν•μ—¬ κ°λ°ν•©λ‹λ‹¤.

1.  **API λ…μ„Έ μ •μ**: `openapi/cafe-kiosk-api-v1.yaml` νμΌμ— APIμ μ—”λ“ν¬μΈνΈ, μ”μ²­/μ‘λ‹µ ν•μ‹ λ“±μ„ μ •μν•©λ‹λ‹¤.
2.  **API μ½”λ“ μƒμ„±**: λ‹¤μ Gradle λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ API μΈν„°νμ΄μ¤μ™€ DTOλ¥Ό μλ™μΌλ΅ μƒμ„±ν•©λ‹λ‹¤.
    ```bash
    ./gradlew openApiGenerate
    ```
3.  **API κµ¬ν„μ²΄ μ‘μ„±**: μƒμ„±λ `...ApiDelegate` μΈν„°νμ΄μ¤λ¥Ό `src/main/java/.../api` ν¨ν‚¤μ§€ λ‚΄μ—μ„ κµ¬ν„ν•©λ‹λ‹¤.
4.  **ν…μ¤νΈ μ½”λ“ μ‘μ„±**: API κµ¬ν„μ²΄(`Delegate`), μ„λΉ„μ¤, λ¦¬ν¬μ§€ν„°λ¦¬ κ³„μΈµμ— λ€ν• ν…μ¤νΈ μ½”λ“λ¥Ό λ¨Όμ € μ‘μ„±ν•©λ‹λ‹¤.
5.  **κµ¬ν„ μ½”λ“ μ‘μ„±**: μ‘μ„±λ ν…μ¤νΈλ¥Ό ν†µκ³Όν•λ„λ΅ μ„λΉ„μ¤μ™€ λ¦¬ν¬μ§€ν„°λ¦¬ λ“± μ‹¤μ  μ½”λ“λ¥Ό κµ¬ν„ν•©λ‹λ‹¤.
6.  **λ¦¬ν©ν† λ§**: κΈ°λ¥ κµ¬ν„ ν›„ μ½”λ“μ κ°€λ…μ„±κ³Ό κµ¬μ΅°λ¥Ό κ°μ„ ν•©λ‹λ‹¤.

## β¨ κΈ°λ¥ λ©λ΅

### β… μ™„λ£λ κΈ°λ¥

- **λ©”λ‰΄ κ΄€λ¦¬**
  - μ‹ κ· μƒν’ λ“±λ΅
  - νλ§¤μ¤‘μΈ μƒν’ λ©λ΅ μ΅°ν
- **μ£Όλ¬Έ κ΄€λ¦¬**
  - μ‹ κ· μ£Όλ¬Έ μƒμ„±
  - μ£Όλ¬Έ μƒνƒ λ³€κ²½ (μ ‘μ -> μ™„λ£)
  - μ£Όλ¬Έ λ©λ΅ κ΄€λ¦¬ (μƒν’ μ¶”κ°€/μ‚­μ /μ „μ²΄μ‚­μ /μλ‰λ³€κ²½)
  - μ£Όλ¬Έ κΈμ•΅ κ³„μ‚°

### π€ μμ •λ κΈ°λ¥

- (μ¶”κ°€ μμ •)
